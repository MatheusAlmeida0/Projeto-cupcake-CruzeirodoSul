<h2 class="mb-4">Gerenciar Produtos</h2>

<div *ngIf="carregando" class="text-center mt-5">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Carregando...</span>
  </div>
</div>

<div *ngIf="!carregando">
  <div *ngIf="listaProdutos.length === 0" class="alert alert-info">
    Nenhum produto cadastrado.
    <a routerLink="/admin/produtos/novo" class="alert-link">Cadastre o primeiro!</a>
  </div>

  <table *ngIf="listaProdutos.length > 0" class="table table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Nome</th>
        <th scope="col">Valor</th>
        <th scope="col" class="text-end">Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let produto of listaProdutos">
        <th scope="row">{{ produto.id_produto }}</th>
        <td>{{ produto.nome }}</td>
        <td>{{ produto.valor | currency : 'BRL' }}</td>

        <td class="text-end">
          <a
            [routerLink]="['/admin/produtos/editar', produto.id_produto]"
            class="btn btn-sm btn-primary me-2"
          >
            Editar
          </a>

          <button (click)="excluirProduto(produto.id_produto)" class="btn btn-sm btn-danger">
            Excluir
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
